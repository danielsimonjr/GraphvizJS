{
  "phase": 2,
  "sprint": 3,
  "title": "Utility and Zoom Tests",
  "priority": "HIGH",
  "effort": "60 minutes",
  "status": "pending",
  "completedAt": null,
  "implementationNotes": null,
  "impact": "Tests foundational utilities and zoom functionality",
  "targetMetrics": {
    "coverage": {
      "current": "0%",
      "target": "90%+ for debounce.ts, editor/zoom.ts, preview/zoom.ts"
    }
  },
  "tasks": [
    {
      "id": "2.3.1",
      "category": "testing",
      "title": "Create debounce.test.ts",
      "description": "Test the debounce utility with 6 test cases.",
      "status": "pending",
      "implementationNotes": null,
      "estimatedHours": 0.25,
      "agent": "haiku",
      "files": ["test/utils/debounce.test.ts"],
      "testCategories": ["unit"],
      "implementation": {
        "purpose": "Verify debounce timing and behavior",
        "keyDecisions": [
          "Use vi.useFakeTimers for timing tests",
          "Test rapid call batching",
          "Test argument passing"
        ]
      },
      "testCases": [
        "debounce() - delays function execution",
        "debounce() - only executes once for rapid calls",
        "debounce() - executes with correct arguments",
        "debounce() - resets timer on new calls",
        "debounce() - handles zero delay",
        "debounce() - preserves 'this' context"
      ],
      "acceptanceCriteria": [
        "6 test cases pass",
        "100% coverage of debounce.ts",
        "Timing behavior verified"
      ]
    },
    {
      "id": "2.3.2",
      "category": "testing",
      "title": "Create editor/zoom.test.ts",
      "description": "Test the editor zoom controller with 8 test cases.",
      "status": "pending",
      "implementationNotes": null,
      "estimatedHours": 0.35,
      "agent": "haiku",
      "files": ["test/editor/zoom.test.ts"],
      "testCategories": ["unit"],
      "implementation": {
        "purpose": "Verify editor zoom in/out/reset functionality",
        "keyDecisions": [
          "Mock CodeMirror EditorView",
          "Test zoom level bounds",
          "Test keymap generation"
        ]
      },
      "testCases": [
        "createEditorZoomExtension() - returns Compartment",
        "createEditorZoomController() - returns controller object",
        "Controller - zoomIn() increases level",
        "Controller - zoomOut() decreases level",
        "Controller - reset() returns to default",
        "Controller - respects min/max bounds",
        "Controller - getLevel() returns current level",
        "createEditorZoomKeymap() - returns keymap array"
      ],
      "acceptanceCriteria": [
        "8 test cases pass",
        "90%+ coverage of editor/zoom.ts",
        "Bounds respected"
      ]
    },
    {
      "id": "2.3.3",
      "category": "testing",
      "title": "Create preview/zoom.test.ts",
      "description": "Test the preview zoom controller with 8 test cases.",
      "status": "pending",
      "implementationNotes": null,
      "estimatedHours": 0.4,
      "agent": "haiku",
      "files": ["test/preview/zoom.test.ts"],
      "testCategories": ["unit"],
      "implementation": {
        "purpose": "Verify preview zoom controls and wheel zoom",
        "keyDecisions": [
          "Test DOM element updates",
          "Test wheel event handling",
          "Test display formatting"
        ]
      },
      "testCases": [
        "createZoomController() - returns controller object",
        "Controller - zoomIn() increases level",
        "Controller - zoomOut() decreases level",
        "Controller - reset() returns to default",
        "Controller - respects min/max bounds",
        "setupZoomControls() - wires up buttons",
        "setupWheelZoom() - handles Ctrl+wheel",
        "updateLevelDisplay() - formats percentage"
      ],
      "acceptanceCriteria": [
        "8 test cases pass",
        "90%+ coverage of preview/zoom.ts",
        "Event handlers tested"
      ]
    }
  ],
  "successCriteria": [
    "All three test files created",
    "22 total test cases pass",
    "Utility files at 90%+ coverage",
    "pnpm test passes"
  ],
  "filesCreated": [
    "test/utils/debounce.test.ts",
    "test/editor/zoom.test.ts",
    "test/preview/zoom.test.ts"
  ],
  "filesModified": [],
  "totalNewTests": 22,
  "totalEstimatedHours": 1.0,
  "dependencies": ["Sprint 2.1"],
  "notes": [
    "debounce.ts is straightforward to test with fake timers",
    "Zoom tests require mocking DOM elements",
    "Can run in parallel with Sprint 2.2"
  ]
}
